template(name="riddlesAll")
  h2.ui.horizontal.header.divider
    i.block.layout.icon
    | {{title}}
  .ui.four.cards.stackable
    if pastorMode
      .card
        .content
          h3.ui.icon.header.center.aligned
            i.add.icon
            .content Добавить Загадку
              .sub.header Добавить новую загадку
        a(href="{{pathFor 'newRiddle' _episodeId=_id}}").ui.orange.bottom.attached.button
          i.add.icon
          | Добавить

    each riddles
      .card
        unless availability
          unless next
            unless pastorMode
              .ui.active.dimmer
                .content
                  .center
                    h3.ui.inverted.icon.header
                      i.lock.icon
                      | Закрыта
        .content
          .ui.corner.label.position
            h5 {{position}}
          .header
            if pastorMode
              a(href="{{pathFor 'editRiddle' _episodeId=episodeId _riddleId=_id}}").ui.icon.mini.orange.button
                i.write.icon
            | {{ucFirst question}}
          .description
            i.book.icon
            | {{books}} {{chapters}}
        if pastorMode
          .extra.content
            span.left.floated
              i.orange.fire.icon
              | {{plurality intricacy "мудрост"}}
          a(href="{{pathFor 'riddle' _episodeId=episodeId _riddleId=_id}}").ui.green.bottom.attached.button
            i.chevron.right.icon
            | Открыть
        else if availability
          .extra.content
            span.right.floated
              i.check.icon
              | Отгадана
          a(href="{{pathFor 'riddle' _episodeId=episodeId _riddleId=_id}}").ui.green.bottom.attached.button
            i.repeat.icon
            | Отгадать снова
        else
          if next
            .extra.content
              span.left.floated
                i.orange.fire.icon
                | {{plurality intricacy "мудрост"}}
              span.right.floated
                i.unlock.icon
                | Открыта
            a(href="{{pathFor 'riddle' _episodeId=episodeId _riddleId=_id}}").ui.blue.bottom.attached.button
              i.play.icon
              | Отгадать
          else
            .extra.content
              span.left.floated
                i.orange.fire.icon
                | {{plurality intricacy "мудрост"}}
              span.right.floated
                i.lock.icon
                | Закрыта
            .ui.blue.bottom.attached.button
              i.play.icon
              | Отгадать